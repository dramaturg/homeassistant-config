#################################################################
## Receiver
#################################################################
receiver_set_source_cbl_sat:
  sequence:    
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'CBL/SAT'

receiver_set_source_bluetooth:
  sequence:    
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'Bluetooth'

receiver_set_source_media_player:
  sequence:
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'Media Player'

receiver_set_source_dvd:
  sequence:
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'DVD/Blu-ray'

receiver_set_source_gaming:
  sequence:
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'Game'

receiver_set_source_tv:
  sequence:
    - service: media_player.select_source
      entity_id: media_player.denon_avr_x1300w
      data:
        source: 'TV Audio'

# solution from https://community.home-assistant.io/t/cant-figure-out-template-to-toggle-volume-mute/9987/2
receiver_mute_unmute:
  sequence:
    - service: media_player.volume_mute
      data_template:
        entity_id: media_player.denon_avr_x1300w
        is_volume_muted: >-
            {%- if states.media_player.denon_avr_x1300w.attributes.is_volume_muted == false -%}
            true
            {%- else -%}
            false
            {%- endif -%}
#################################################################
## Kodi
#################################################################
kodi_pause:
  sequence:
    - service: media_player.media_pause
      entity_id: media_player.kodi

kodi_play:
  sequence:
    - service: media_player.media_play
      entity_id: media_player.kodi
#################################################################
## Bar Table
#################################################################
bar_table_green:
  sequence:
    - service: mqtt.publish
      data:
        payload: '{"state":"ON","brightness":255,"white_value":0,"color":{"r":0,"g":255,"b":0},"transition":"5"}'
        qos: 1
        retain: false
        topic: "RGBW/00D2EE20/json/set"

bar_table_red:
  sequence:
    - service: mqtt.publish
      data:
        payload: '{"state":"ON","brightness":255,"white_value":0,"color":{"r":255,"g":0,"b":0},"transition":"5"}'
        qos: 1
        retain: false
        topic: "RGBW/00D2EE20/json/set"

bar_table_white:
  sequence:
    - service: mqtt.publish
      data:
        payload: '{"state":"ON","brightness":255,"white_value":255,"color":{"r":0,"g":0,"b":0},"transition":"5"}'
        qos: 1
        retain: false
        topic: "RGBW/00D2EE20/json/set"
#################################################################
## Learn Faces
#################################################################
learn_faces:
  sequence:
    - event: eifinger_learn_faces
#################################################################
## Goldie (Vacuum Robot)
#################################################################
goldie_clean:
  sequence:
    - service: switch.turn_on
      entity_id: switch.goldie_clean
    - delay: '00:00:05'
    - service: switch.turn_on
      entity_id: switch.goldie_clean
#################################################################
## Update Entities
#################################################################
travel_time_home_user_one_update:
  sequence:
    - service: homeassistant.update_entity
      entity_id: sensor.travel_time_home_user_one

travel_time_home_user_two_update:
  sequence:
    - service: homeassistant.update_entity
      entity_id: sensor.travel_time_home_user_two
      
#################################################################
## Control Thermostats
#################################################################

livingroom_wakeup:
  sequence:
    - service: climate.turn_on
      entity_id: climate.wohnzimmer_thermostat
    - service: climate.set_temperature
      entity_id: climate.wohnzimmer_thermostat
      data:
        temperature: 22
    - service: climate.turn_on
      entity_id: climate.kuche_thermostat
    - service: climate.set_temperature
      entity_id: climate.kuche_thermostat
      data:
        temperature: 23

livingroom_sleep:
  sequence:
    - service: climate.turn_on
      entity_id: climate.wohnzimmer_thermostat
    - service: climate.set_temperature
      entity_id: climate.wohnzimmer_thermostat
      data:
        temperature: 18
    - service: climate.turn_on
      entity_id: climate.kuche_thermostat
    - service: climate.set_temperature
      entity_id: climate.kuche_thermostat
      data:
        temperature: 18