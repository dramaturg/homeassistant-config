vacuum:
  - platform: xiaomi_miio
    host: !secret xiaomi_vacuum_ip
    token: !secret xiaomi_vacuum_token

sensor:
  - platform: rest
    resource: !secret valetudo_url #http://192.168.x.x/api/remote/map
    name: snowie_map
    value_template: '{{ value_json.mapsrc }}'

camera:
  - platform: generic
    name: Snowies Karte
    still_image_url: !secret snowie_map_url #http://192.168.x.x{{states.sensor.snowie_map.state | string }}
    content_type: image/png
    framerate: 1

switch:
- platform: template
  switches:
    xiaomi_vacuum_cleaner:
      value_template: "{{ is_state( 'vacuum.xiaomi_vacuum_cleaner', 'on') }}"
      turn_on:
        service: vacuum.start
        entity_id: vacuum.xiaomi_vacuum_cleaner
      turn_off:
        service: vacuum.return_to_base
        entity_id: vacuum.xiaomi_vacuum_cleaner

alexa:
  smart_home:
    filter:
      include_entities:
        - switch.xiaomi_vacuum_cleaner
    entity_config:
      switch.xiaomi_vacuum_cleaner:
        name: Snowie
        description: Snowie Xiaomi Staubsauger
        display_categories: SWITCH
