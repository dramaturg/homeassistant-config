alexa:
  smart_home:
    filter:
      include_entities:
        - switch.floor_heating
    entity_config:
      switch.floor_heating:
        name: Fußbodenheizung
        description: Fußbodenheizung in Wohnzimmer und Küche
        display_categories: SWITCH

switch:
  - platform: template
    switches:
      floor_heating:
            friendly_name: "Fußbodenheizung"
            value_template: "{{float(states.climate.wohnzimmer_thermostat.attributes.temperature) > 18 and float(states.climate.kuche_thermostat.attributes.temperature) > 18}}"
            turn_on:
              - service: script.livingroom_wakeup
            turn_off:
              - service: script.livingroom_wakeup

script:
  livingroom_wakeup:
  sequence:
    - service: climate.turn_on
      entity_id: climate.wohnzimmer_thermostat
    - service: climate.set_temperature
      entity_id: climate.wohnzimmer_thermostat
      data:
        temperature: 22
    - service: climate.turn_on
      entity_id: climate.kuche_thermostat
    - service: climate.set_temperature
      entity_id: climate.kuche_thermostat
      data:
        temperature: 23

livingroom_sleep:
  sequence:
    - service: climate.turn_on
      entity_id: climate.wohnzimmer_thermostat
    - service: climate.set_temperature
      entity_id: climate.wohnzimmer_thermostat
      data:
        temperature: 18
    - service: climate.turn_on
      entity_id: climate.kuche_thermostat
    - service: climate.set_temperature
      entity_id: climate.kuche_thermostat
      data:
        temperature: 18