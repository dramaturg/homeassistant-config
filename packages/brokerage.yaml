---
sensor:
  - platform: alpha_vantage
    api_key: !secret alpha_vantage_api_key
    foreign_exchange:
      - name: Monero
        from: XMR
        to: EUR
  - platform: coinmarketcap
    currency_id: 328
  - platform: avanza_stock
    stock: 4175
    name: avanza_ibm
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 3873
    name: avanza_microsoft
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732334
    name: avanza_munich_re
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732348
    name: avanza_siemens
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732395
    name: avanza_bayer
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732289
    name: avanza_basf
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732360
    name: avanza_allianz
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 3644
    name: avanza_procter_and_gamble
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 3666
    name: avanza_johnson_and_johnson
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745799
    name: avanza_vinci
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 732452
    name: avanza_bmw
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745796
    name: avanza_danone
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745846
    name: avanza_veolia
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745836
    name: avanza_air_liquide
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745901
    name: avanza_loreal
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 745909
    name: avanza_vivendi
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
  - platform: avanza_stock
    stock: 361180
    name: avanza_service_now
    monitored_conditions:
      - change
      - changePercent
      - country
      - currency
      - directYield
      - dividends
      - flagCode
      - hasInvestmentFees
      - highestPrice
      - id
      - isin
      - lastPrice
      - lastPriceUpdated
      - loanFactor
      - lowestPrice
      - marketCapital
      - marketList
      - marketMakerExpected
      - marketPlace
      - marketTrades
      - morningStarFactSheetUrl
      - name
      - numberOfOwners
      - orderDepthReceivedTime
      - priceAtStartOfYear
      - priceEarningsRatio
      - priceFiveYearsAgo
      - priceOneMonthAgo
      - priceOneWeekAgo
      - priceOneYearAgo
      - priceSixMonthsAgo
      - priceThreeMonthsAgo
      - priceThreeYearsAgo
      - pushPermitted
      - quoteUpdated
      - sector
      - shortSellable
      - superLoan
      - tickerSymbol
      - totalNumberOfShares
      - totalValueTraded
      - totalVolumeTraded
      - tradable
      - volatility
input_text:
  avanza_ibm_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_ibm_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_microsoft_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_microsoft_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_munich_re_min:
    icon: mdi:arrow-collapse-dwon
    name: Min Alert
  avanza_munich_re_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_siemens_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_siemens_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_bayer_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_bayer_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_basf_min:
    icon: mdi:arrow-collapse-dwon
    name: Min Alert
  avanza_basf_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_allianz_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_allianz_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_procter_and_gamble_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_procter_and_gamble_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_johnson_and_johnson_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_johnson_and_johnson_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_vinci_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_vinci_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_bmw_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_bmw_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_danone_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_danone_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_veolia_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_veolia_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_air_liquide_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_air_liquide_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_loreal_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_loreal_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_vivendi_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_vivendi_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
  avanza_service_now_min:
    icon: mdi:arrow-collapse-down
    name: Min Alert
  avanza_service_now_max:
    icon: mdi:arrow-collapse-up
    name: Max Alert
automation:
  - id: avanza_ibm
    alias: Avanza IBM
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_ibm') | float > states('input_text.avanza_ibm_max') |float
          and states('input_text.avanza_ibm_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_ibm') | float < states('input_text.avanza_ibm_min') | float
          and states('input_text.avanza_ibm_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_ibm') | float >states('input_text.avanza_ibm_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_ibm','name') }}:
            {{ states('sensor.avanza_ibm') }} {{ state_attr('sensor.avanza_ibm','currency') }}.
            Over threshold of {{ states('input_text.avanza_ibm_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_ibm','name') }}:
            {{ states('sensor.avanza_ibm') }} {{ state_attr('sensor.avanza_ibm','currency') }}.
            Under threshold of {{ states('input_text.avanza_ibm_min') }}"
            {% endif %}
  - id: avanza_microsoft
    alias: Avanza Microsoft
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_microsoft') | float > states('input_text.avanza_microsoft_max') | float
          and states('input_text.avanza_ibm_min') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_microsoft') | float < states('input_text.avanza_microsoft_min') | float
          and states('input_text.avanza_ibm_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_microsoft') | float > states('input_text.avanza_microsoft_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_microsoft','name') }}:
            {{ states('sensor.avanza_microsoft') }} {{ state_attr('sensor.avanza_microsoft','currency') }}.
            Over threshold of {{ states('input_text.avanza_microsoft_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_microsoft','name') }}:
            {{ states('sensor.avanza_microsoft') }} {{ state_attr('sensor.avanza_microsoft','currency') }}.
            Under threshold of {{ states('input_text.avanza_microsoft_min') }}"
            {% endif %}
  - id: avanza_munich_re
    alias: Avanza Munich Re
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_munich_re') | float > states('input_text.avanza_munich_re_max') | float
          and states('input_text.avanza_munich_re_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_munich_re') | float < states('input_text.avanza_munich_re_min') | float
          and states('input_text.avanza_munich_re_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_munich_re') | float > states('input_text.avanza_munich_re_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_munich_re','name') }}:
            {{ states('sensor.avanza_munich_re') }} {{ state_attr('sensor.avanza_munich_re','currency') }}.
            Over threshold of {{ states('input_text.avanza_munich_re_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_munich_re','name') }}:
            {{ states('sensor.avanza_munich_re') }} {{ state_attr('sensor.avanza_munich_re','currency') }}.
            Under threshold of {{ states('input_text.avanza_munich_re_min') }}"
            {% endif %}
  - id: avanza_siemens
    alias: Avanza Siemens
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_siemens') | float > states('input_text.avanza_siemens_max') | float
          and states('input_text.avanza_siemens_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_siemens') | float < states('input_text.avanza_siemens_min') | float
          and states('input_text.avanza_siemens_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_siemens') | float > states('input_text.avanza_siemens_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_siemens','name') }}:
            {{ states('sensor.avanza_siemens') }} {{ state_attr('sensor.avanza_siemens','currency') }}.
            Over threshold of {{ states('input_text.avanza_siemens_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_siemens','name') }}:
            {{ states('sensor.avanza_siemens') }} {{ state_attr('sensor.avanza_siemens','currency') }}.
            Under threshold of {{ states('input_text.avanza_siemens_min') }}"
            {% endif %}
  - id: avanza_bayer
    alias: Avanza Bayer
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_bayer') | float > states('input_text.avanza_bayer_max') | float
          and states('input_text.avanza_bayer_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_bayer') | float < states('input_text.avanza_bayer_min') | float
          and states('input_text.avanza_bayer_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_bayer') | float > states('input_text.avanza_bayer_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_bayer','name') }}:
            {{ states('sensor.avanza_bayer') }} {{ state_attr('sensor.avanza_bayer','currency') }}.
            Over threshold of {{ states('input_text.avanza_bayer_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_bayer','name') }}:
            {{ states('sensor.avanza_bayer') }} {{ state_attr('sensor.avanza_bayer','currency') }}.
            Under threshold of {{ states('input_text.avanza_bayer_min') }}"
            {% endif %}
  - id: avanza_basf
    alias: Avanza BASF
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_basf') | float > states('input_text.avanza_basf_max') | float
          and states('input_text.avanza_basf_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_basf') | float < states('input_text.avanza_basf_min') | float
          and states('input_text.avanza_basf_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_basf') | float > states('input_text.avanza_basf_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_basf','name') }}:
            {{ states('sensor.avanza_basf') }} {{ state_attr('sensor.avanza_basf','currency') }}.
            Over threshold of {{ states('input_text.avanza_basf_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_basf','name') }}:
            {{ states('sensor.avanza_basf') }} {{ state_attr('sensor.avanza_basf','currency') }}.
            Under threshold of {{ states('input_text.avanza_basf_min') }}"
            {% endif %}
  - id: avanza_allianz
    alias: Avanza Allianz
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_allianz') | float > states('input_text.avanza_allianz_max') | float
          and states('input_text.avanza_allianz_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_allianz') | float < states('input_text.avanza_allianz_min') | float
          and states('input_text.avanza_allianz_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_allianz') | float > states('input_text.avanza_allianz_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_allianz','name') }}:
            {{ states('sensor.avanza_allianz') }} {{ state_attr('sensor.avanza_allianz','currency') }}.
            Over threshold of {{ states('input_text.avanza_allianz_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_allianz','name') }}:
            {{ states('sensor.avanza_allianz') }} {{ state_attr('sensor.avanza_allianz','currency') }}.
            Under threshold of {{ states('input_text.avanza_allianz_min') }}"
            {% endif %}
  - id: avanza_procter_and_gamble
    alias: Avanza Procter And Gamble
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_procter_and_gamble') | float >
          states('input_text.avanza_procter_and_gamble_max') | float
          and states('input_text.avanza_procter_and_gamble_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_procter_and_gamble') | float <
          states('input_text.avanza_procter_and_gamble_min') | float
          and states('input_text.avanza_procter_and_gamble_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_procter_and_gamble') | float >
            states('input_text.avanza_procter_and_gamble_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_procter_and_gamble','name') }}:
            {{ states('sensor.avanza_procter_and_gamble') }}
            {{ state_attr('sensor.avanza_procter_and_gamble','currency') }}.
            Over threshold of {{ states('input_text.avanza_procter_and_gamble_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_procter_and_gamble','name') }}:
            {{ states('sensor.avanza_procter_and_gamble') }}
            {{ state_attr('sensor.avanza_procter_and_gamble','currency') }}.
            Under threshold of {{ states('input_text.avanza_procter_and_gamble_min') }}"
            {% endif %}
  - id: avanza_johnson_and_johnson
    alias: Avanza Johnson And Johnson
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_johnson_and_johnson') | float >
          states('input_text.avanza_johnson_and_johnson_max') | float
          and states('input_text.avanza_johnson_and_johnson_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_johnson_and_johnson') | float <
          states('input_text.avanza_johnson_and_johnson_min') | float
          and states('input_text.avanza_johnson_and_johnson_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_johnson_and_johnson') | float >
            states('input_text.avanza_johnson_and_johnson_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_johnson_and_johnson','name') }}:
            {{ states('sensor.avanza_johnson_and_johnson') }}
            {{ state_attr('sensor.avanza_johnson_and_johnson','currency') }}.
            Over threshold of {{ states('input_text.avanza_johnson_and_johnson_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_johnson_and_johnson','name') }}:
            {{ states('sensor.avanza_johnson_and_johnson') }}
            {{ state_attr('sensor.avanza_johnson_and_johnson','currency') }}.
            Under threshold of {{ states('input_text.avanza_johnson_and_johnson_min') }}"
            {% endif %}
  - id: avanza_vinci
    alias: Avanza VINCI
    trigger:
      - platform: template
        value_template: >
          {{ states('sensor.avanza_vinci') | float > states('input_text.avanza_vinci_max') | float
          and states('input_text.avanza_vinci_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
          {{ states('sensor.avanza_vinci') | float < states('input_text.avanza_vinci_min') | float
          and states('input_text.avanza_vinci_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_vinci') | float > states('input_text.avanza_vinci_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_vinci','name') }}:
            {{ states('sensor.avanza_vinci') }} {{ state_attr('sensor.avanza_vinci','currency') }}.
            Over threshold of {{ states('input_text.avanza_vinci_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_vinci','name') }}:
            {{ states('sensor.avanza_vinci') }} {{ state_attr('sensor.avanza_vinci','currency') }}.
            Under threshold of {{ states('input_text.avanza_vinci_min') }}"
            {% endif %}
  - id: avanza_bmw
    alias: Avanza BMW
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_bmw') | float > states('input_text.avanza_bmw_max') | float
            and states('input_text.avanza_bmw_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_bmw') | float < states('input_text.avanza_bmw_min') | float
            and states('input_text.avanza_bmw_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_bmw') | float > states('input_text.avanza_bmw_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_bmw','name') }}:
            {{ states('sensor.avanza_bmw') }} {{ state_attr('sensor.avanza_bmw','currency') }}.
            Over threshold of {{ states('input_text.avanza_bmw_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_bmw','name') }}:
            {{ states('sensor.avanza_bmw') }} {{ state_attr('sensor.avanza_bmw','currency') }}.
            Under threshold of {{ states('input_text.avanza_bmw_min') }}"
            {% endif %}
  - id: avanza_danone
    alias: Avanza Danone
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_danone') | float > states('input_text.avanza_danone_max') | float
            and states('input_text.avanza_danone_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_danone') | float < states('input_text.avanza_danone_min') | float
            and states('input_text.avanza_danone_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_danone') | float > states('input_text.avanza_danone_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_danone','name') }}:
            {{ states('sensor.avanza_danone') }} {{ state_attr('sensor.avanza_danone','currency') }}.
            Over threshold of {{ states('input_text.avanza_danone_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_danone','name') }}:
            {{ states('sensor.avanza_danone') }} {{ state_attr('sensor.avanza_danone','currency') }}.
            Under threshold of {{ states('input_text.avanza_danone_min') }}"
            {% endif %}
  - id: avanza_veolia
    alias: Avanza Veolia
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_veolia') | float > states('input_text.avanza_veolia_max') | float
            and states('input_text.avanza_veolia_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_veolia') | float < states('input_text.avanza_veolia_min') | float
            and states('input_text.avanza_veolia_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_veolia') | float > states('input_text.avanza_veolia_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_veolia') }} {{ state_attr('sensor.avanza_veolia','currency') }}.
            Over threshold of {{ states('input_text.avanza_veolia_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_veolia') }} {{ state_attr('sensor.avanza_veolia','currency') }}.
            Under threshold of {{ states('input_text.avanza_veolia_min') }}"
            {% endif %}
  - id: avanza_air_liquide
    alias: Avanza Air Liquide
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_air_liquide') | float > states('input_text.avanza_air_liquide_max') | float
            and states('input_text.avanza_air_liquide_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_air_liquide') | float < states('input_text.avanza_air_liquide_min') | float
            and states('input_text.avanza_air_liquide_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_air_liquide') | float > states('input_text.avanza_air_liquide_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_air_liquide','name') }}:
            {{ states('sensor.avanza_air_liquide') }} {{ state_attr('sensor.avanza_air_liquide','currency') }}.
            Over threshold of {{ states('input_text.avanza_air_liquide_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_air_liquide') }} {{ state_attr('sensor.avanza_air_liquide','currency') }}.
            Under threshold of {{ states('input_text.avanza_air_liquide_min') }}"
            {% endif %}
  - id: avanza_loreal
    alias: Avanza Loreal
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_loreal') | float > states('input_text.avanza_loreal_max') | float
            and states('input_text.avanza_loreal_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_loreal') | float < states('input_text.avanza_loreal_min') | float
            and states('input_text.avanza_loreal_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_loreal') | float > states('input_text.avanza_loreal_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_loreal','name') }}:
            {{ states('sensor.avanza_loreal') }} {{ state_attr('sensor.avanza_loreal','currency') }}.
            Over threshold of {{ states('input_text.avanza_loreal_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_loreal') }} {{ state_attr('sensor.avanza_loreal','currency') }}.
            Under threshold of {{ states('input_text.avanza_loreal_min') }}"
            {% endif %}
  - id: avanza_vivendi
    alias: Avanza Vivendi
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_vivendi') | float > states('input_text.avanza_vivendi_max') | float
            and states('input_text.avanza_vivendi_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_vivendi') | float < states('input_text.avanza_vivendi_min') | float
            and states('input_text.avanza_vivendi_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_vivendi') | float > states('input_text.avanza_vivendi_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_vivendi','name') }}:
            {{ states('sensor.avanza_vivendi') }} {{ state_attr('sensor.avanza_vivendi','currency') }}.
            Over threshold of {{ states('input_text.avanza_vivendi_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_vivendi') }} {{ state_attr('sensor.avanza_vivendi','currency') }}.
            Under threshold of {{ states('input_text.avanza_vivendi_min') }}"
            {% endif %}
  - id: avanza_service_now
    alias: Service Now Vivendi
    trigger:
      - platform: template
        value_template: >
            {{ states('sensor.avanza_service_now') | float > states('input_text.avanza_service_now_max') | float
            and states('input_text.avanza_service_now_max') not in ['unknown', ''] }}
      - platform: template
        value_template: >
            {{ states('sensor.avanza_service_now') | float < states('input_text.avanza_service_now_min') | float
            and states('input_text.avanza_service_now_min') not in ['unknown', ''] }}
    action:
      - service: notify.kevin
        data_template:
          message: >
            {% if states('sensor.avanza_service_now') | float > states('input_text.avanza_service_now_max') | float %}
            "Stock alert: {{ state_attr('sensor.avanza_service_now','name') }}:
            {{ states('sensor.avanza_service_now') }} {{ state_attr('sensor.avanza_service_now','currency') }}.
            Over threshold of {{ states('input_text.avanza_service_now_max') }}"
            {% else %}
            "Stock alert: {{ state_attr('sensor.avanza_veolia','name') }}:
            {{ states('sensor.avanza_service_now') }} {{ state_attr('sensor.avanza_service_now','currency') }}.
            Under threshold of {{ states('input_text.avanza_service_now_min') }}"
            {% endif %}
